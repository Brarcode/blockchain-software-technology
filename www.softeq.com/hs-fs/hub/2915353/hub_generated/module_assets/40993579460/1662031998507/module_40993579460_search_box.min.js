var module_40993579460=function(){var __hs_messages={};i18n_getmessage=function(){return hs_i18n_getMessage(__hs_messages,hsVars.language,arguments)},i18n_getlanguage=function(){return hsVars.language};var hsSearch=function(_instance){var onKeydown,func,wait,immediate,timeout,searchBar=document.querySelector(".hs-search-bar"),searchTerm="",searchForm=_instance,searchField=_instance.querySelector(".hs-search-field__input"),searchButton=_instance.querySelector(".hs-search-field__button"),searchResults=_instance.querySelector(".hs-search-field__suggestions"),emptySearchResults=function(){searchResults.innerHTML="",searchField.focus(),searchForm.classList.remove("hs-search-field--open")},getSearchResults=function(){var request=new XMLHttpRequest,requestUrl="/_hcms/search?&term="+encodeURIComponent(searchTerm)+"&limit="+encodeURIComponent(10)+"&autocomplete=true&analytics=true&"+function(){for(var formParams=[],form=_instance.querySelector("form"),i=0;i<form.querySelectorAll("input[type=hidden]").length;i++){var e=form.querySelectorAll("input[type=hidden]")[i];"limit"!==e.name&&formParams.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}return formParams.join("&")}();request.open("GET",requestUrl,!0),request.onload=function(){if(request.status>=200&&request.status<400){var data=JSON.parse(request.responseText);data.total>0?(items=[],data.results.forEach((function(val,index){items.push("<li id='result"+index+"'><a href='"+val.url+"'>"+val.title+"</a></li>")})),emptySearchResults(),searchResults.innerHTML=items.join(""),searchForm.classList.add("hs-search-field--open"),trapFocus()):emptySearchResults()}else console.error("Server reached, error retrieving results.");var items},request.onerror=function(){console.error("Could not reach the server.")},request.send()},onClickOutside=function(e){searchBar.contains(e.target)||closeSearchBar()},closeSearchBar=function(){searchField.value="",document.body.removeEventListener("click",onClickOutside),$(".hs-search-bar__field").fadeOut(100),document.querySelector(".hs-search-bar__button").focus()},trapFocus=function(){var tabbable=[];tabbable.push(searchField),tabbable.push(searchButton);for(var tabbables=searchResults.getElementsByTagName("A"),i=0;i<tabbables.length;i++)tabbable.push(tabbables[i]);var firstTabbable=tabbable[0],lastTabbable=tabbable[tabbable.length-1];searchForm.removeEventListener("keydown",onKeydown),onKeydown=function(e){switch(e.which){case 9:!function(e){e.target!=lastTabbable||e.shiftKey?e.target==firstTabbable&&e.shiftKey&&(e.preventDefault(),lastTabbable.focus()):(e.preventDefault(),firstTabbable.focus())}(e);break;case 27:closeSearchBar(),emptySearchResults();break;case 38:!function(e){e.preventDefault(),e.target==firstTabbable?lastTabbable.focus():tabbable.forEach((function(el){el==e.target&&tabbable[tabbable.indexOf(el)-1].focus()}))}(e);break;case 40:!function(e){e.preventDefault(),e.target==lastTabbable?firstTabbable.focus():tabbable.forEach((function(el){el==e.target&&tabbable[tabbable.indexOf(el)+1].focus()}))}(e)}},searchForm.addEventListener("keydown",onKeydown)},isSearchTermPresent=(func=function(){(searchTerm=searchField.value).length>2?getSearchResults():0==searchTerm.length&&emptySearchResults()},wait=250,function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait||200),callNow&&func.apply(context,args)});document.body.addEventListener("click",onClickOutside),trapFocus(),searchField.addEventListener("input",(function(e){9!=e.which&&40!=e.which&&38!=e.which&&27!=e.which&&searchTerm!=searchField.value&&isSearchTermPresent()}))},openSearchBar=function(){var searchBar=document.querySelector("#hs-search-bar");$(".hs-search-bar__field").fadeIn("fast");var searchResults=searchBar.querySelectorAll(".hs-search-field");Array.prototype.forEach.call(searchResults,(function(el){hsSearch(el)}))};(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?document.querySelector(".hs-search-bar__button").addEventListener("click",openSearchBar):document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".hs-search-bar__button").addEventListener("click",openSearchBar)}))}();